<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map.</title>
    <script type="text/javascript" src="d3.min.js"></script>
    <script type="text/javascript" src="d3.geo.projection.min.js"></script>
    <script type="text/javascript" src="celestial.min.js"></script>
    <link rel="stylesheet" href="celestial.css">
    <style>
        body {
            font-family: sans-serif;
            width: 100%;
            height: 100vh;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #map-container {


            transform: scale(1);
            transform-origin: left top;
        }

        .custom_form {
            display: flex;
            margin: 15px auto;
        }

        .custom_form button {
            margin: 5px;
            color: rgb(0, 0, 0);
            cursor: pointer;
            border-radius: 5px;
            padding: 5px 10px;
        }
    </style>
</head>

<body>

    <div id="map-container">
        <div id="map"></div>
    </div>
    <div class="custom_form">
        <button id="constellations_line">Constellations</button>
        <button id="graticule">Graticule</button>
        <button id="milky_way">Milky Way</button>
        <button id="constellation_name">Constellations Name</button>
        <button id="equatorial">Equatorial</button>
        <button id="ecliptic">Ecliptic</button>
        <button id="galactic">Galactic</button>
        <button id="supergalactic">Supergalactic</button>
        <button id="moon">Moon</button>
    </div>
    <script type="text/javascript">

        const DATE = new Date("2021-09-25T04:00:00+0000");
        const [LAT, LON] = [36.525321, -121.815916];
        const FONT = "Raleway";

    const config = {
            container: "map",
            width: 800,

            form: false,
            advanced: false,
            interactive: false,
            disableAnimations: true,

            zoomlevel: null,
            zoomextend: 1,

            projection: "airy",
            transform: "equatorial",

            follow: "zenith",
            geopos: [LAT, LON],
            datapath: "https://ofrohn.github.io/data/",

            lines: {
                graticule: { show: false },
                equatorial: { show: false },
                ecliptic: { show: false },
                galactic: { show: false },
                supergalactic: { show: false }
            },

            planets: {
                show: true,
                which: ["mer", "ven", "ter", "lun", "mar", "jup", "sat"],
                symbolType: "disk",
                names: false,
                nameStyle: {
                    fill: "#00ccff",
                    font: `14px ${FONT}`,
                    align: "center",
                    baseline: "top"
                },
                namesType: "en"
            },

            dsos: {
                show: false,
                names: false
            },
            constellations: {
                names: true,
                namesType: "iau",
                nameStyle: {
                    fill: "#ffffff",
                    align: "center",
                    baseline: "middle",
                    font: [`14px ${FONT}`, `8px ${FONT}`, `0px ${FONT}`]
                },
                lines: false,
                lineStyle: { stroke: "#cccccc", width: 1, opacity: 0.4 }
            },

            mw: {
                show: false,
                // style: { fill: "#ffffff", opacity: 0.02 }
                style: { fill: "#000000", opacity: 1 }
            },

            lines: {
                graticule: {
                    show: false,
                    stroke: "#cccccc",
                    width: 0.6,
                    opacity: 0.8,
                    lon: {
                        pos: [""],
                        fill: "#eee",
                        font: "10px Helvetica, Arial, sans-serif"
                    },
                    lat: {
                        pos: [""],
                        fill: "#eee",
                        font: "10px Helvetica, Arial, sans-serif"
                    }
                },
                equatorial: { show: false, stroke: "#aaaaaa", width: 1.3, opacity: 0.7 },
                ecliptic: { show: false, stroke: "#66cc66", width: 1.3, opacity: 0.7 },
                galactic: { show: false, stroke: "#cc6666", width: 1.3, opacity: 0.7 },
                supergalactic: { show: false, stroke: "#cc66cc", width: 1.3, opacity: 0.7 }
            },

            background: {
                fill: "#0b1a26",
                stroke: "#ffffff",
                opacity: 1,
                width: 2
            },

            stars: {
                colors: true,
                size: 4,
                limit: 6,
                exponent: -0.28,
                designation: false,

                propername: false,
                propernameType: "name",
                propernameStyle: {
                    fill: "#ddddbb",
                    font: `8px ${FONT}`,
                    align: "right",
                    baseline: "center"
                },
                propernameLimit: 2.0
            }
        };

        document.getElementById("constellation_name").onclick = () => {
            config.constellations.names = !config.constellations.names
            updateConfigAndRedraw();
        };

        document.getElementById("constellations_line").onclick = () => {
            config.constellations.lines = !config.constellations.lines
            updateConfigAndRedraw();
        };

        document.getElementById("graticule").onclick = () => {
            config.lines.graticule.show = !config.lines.graticule.show
            updateConfigAndRedraw();
        };

        document.getElementById("milky_way").onclick = () => {
            config.mw.show = !config.mw.show;
            updateConfigAndRedraw();
        };

        document.getElementById("equatorial").onclick = () => {
            config.lines.equatorial.show = !config.lines.equatorial.show;
            updateConfigAndRedraw();
        };

        document.getElementById("ecliptic").onclick = () => {
            config.lines.ecliptic.show = !config.lines.ecliptic.show;
            updateConfigAndRedraw();
        };

        document.getElementById("galactic").onclick = () => {
            config.lines.galactic.show = !config.lines.galactic.show;
            updateConfigAndRedraw();
        };

        document.getElementById("supergalactic").onclick = () => {
            config.lines.supergalactic.show = !config.lines.supergalactic.show;
            updateConfigAndRedraw();
        };

        Celestial.display(config);
        Celestial.skyview({ date: DATE });
        function updateConfigAndRedraw() {
            Celestial.apply(config)
        }

    </script>
</body>

</html>